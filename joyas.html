<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="viewport" content="initial-scale=1, maximum-scale=1">
      <title>O&KTrends</title>
      <meta name="keywords" content="">
      <meta name="description" content="">
      <meta name="author" content="">
      <link rel="stylesheet" href="css/bootstrap.min.css">
      <link rel="stylesheet" href="css/style.css">
      <link rel="stylesheet" href="css/responsive.css">
      <link rel="icon" href="images/logoiconsinfondo.ico" type="image/gif" />
      <link rel="stylesheet" href="css/jquery.mCustomScrollbar.min.css">
      <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css" media="screen">
   </head>
   <body class="main-layout position_head">
      <div class="loader_bg">
         <div class="loader"><img src="images/loading.gif" alt="#" /></div>
      </div>
            <header>
         <div class="header">
            <div class="container-fluid">
               <div class="row">
                  <div class="col-xl-3 col-lg-3 col-md-3 col-sm-3 col logo_section">
                     <div class="full">
                        <div class="center-desk">
                           <div class="logo">
                              <a href="index.html"><img src="images/logo.png" alt="#" class="img-fluid" style="max-height: 45px;"/></a>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="col-xl-9 col-lg-9 col-md-9 col-sm-9">
                     <nav class="navigation navbar navbar-expand-md navbar-dark ">
                        <button class="navbar-toggler custom-toggler" type="button" data-toggle="collapse" data-target="#navbarsExample04" aria-controls="navbarsExample04" aria-expanded="false" aria-label="Toggle navigation">
                           <span class="navbar-toggler-icon"></span>
                        </button>
                        <div class="collapse navbar-collapse" id="navbarsExample04">
                           <ul class="navbar-nav mr-auto">
                              <li class="nav-item">
                                 <a class="nav-link" href="index.html">Inicio</a>
                              </li>

                              <li class="nav-item">
                                 <a class="nav-link" href="glasses.html">Relojes</a>
                              </li>     
                              
                              <li class="nav-item">
                                 <a class="nav-link" href="glasses2.html">Ropa</a>
                              </li>

                              <li class="nav-item active">
                                 <a class="nav-link" href="joyas.html">Joyas</a>
                              </li>
                            

                           </ul>
                        </div>      
                     </nav>
                  </div>
               </div>
            </div>
         </div>
      </header>

<div class="glasses">
    <div class="container">
        <div class="row">
            <div class="col-md-10 offset-md-1">
                <div class="titlepage">
                    <h2>Joyas - Pulseras</h2>
                    <p>Pulseras en Oro Laminado: La elección perfecta para parejas o un estilo unico, ofreciendo un excelente acabado y la tranquilidad de una garantía de 1 año.</p>
                </div>
            </div>
        </div>
    </div>

    <div class="container-fluid">
        <div class="row">

            <div class="col-6 col-sm-6 col-md-4 col-lg-3 col-xl-2">
                <div class="glasses_box">
                    <figure>
                        <img src="images/joyas venta/1/negro.jpg" alt="Pulsera Corona" style="border-radius: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.2); transition: transform 0.3s ease; cursor: pointer;" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'"/>
                    </figure>
                    <h3><span class="blu">$</span>100,000 COP</h3>
                    <p>Pulsera en oro Laminado Corona</p>
                    <button class="btn-add-cart" data-modal="modalProducto4001">Añadir al carrito</button>
                </div>
            </div>

            <div class="col-6 col-sm-6 col-md-4 col-lg-3 col-xl-2">
                <div class="glasses_box">
                    <figure>
                        <img src="images/joyas venta/2/dorado.jpg" alt="Pulsera Circulares" style="border-radius: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.2); transition: transform 0.3s ease; cursor: pointer;" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'"/>
                    </figure>
                    <h3><span class="blu">$</span>120,000 COP</h3>
                    <p>Pulsera en oro Laminado Circulares</p>
                    <button class="btn-add-cart" data-modal="modalProducto4002">Añadir al carrito</button>
                </div>
            </div>

            <div class="col-6 col-sm-6 col-md-4 col-lg-3 col-xl-2">
                <div class="glasses_box">
                    <figure>
                        <img src="images/joyas venta/3/portada.jpg" alt="Pulsera 2 colores" style="border-radius: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.2); transition: transform 0.3s ease; cursor: pointer;" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'"/>
                    </figure>
                    <h3><span class="blu">$</span>120,000 COP</h3>
                    <p>Pulsera en oro Laminado</p>
                    <button class="btn-add-cart" data-modal="modalProducto4003">Añadir al carrito</button>
                </div>
            </div>
            
            <div class="col-6 col-sm-6 col-md-4 col-lg-3 col-xl-2">
                <div class="glasses_box">
                    <figure>
                        <img src="images/joyas venta/4/portada.jpg" alt="Pulsera Negro/Beige" style="border-radius: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.2); transition: transform 0.3s ease; cursor: pointer;" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'"/>
                    </figure>
                    <h3><span class="blu">$</span>130,000 COP</h3>
                    <p>Pulsera en oro Laminado</p>
                    <button class="btn-add-cart" data-modal="modalProducto4004">Añadir al carrito</button>
                </div>
            </div>

            <div class="col-6 col-sm-6 col-md-4 col-lg-3 col-xl-2">
                <div class="glasses_box">
                    <figure>
                        <img src="images/joyas venta/5/portada.jpg" alt="Pulsera Negro/Dorado" style="border-radius: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.2); transition: transform 0.3s ease; cursor: pointer;" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'"/>
                    </figure>
                    <h3><span class="blu">$</span>120,000 COP</h3>
                    <p>Pulsera en oro Laminado</p>
                    <button class="btn-add-cart" data-modal="modalProducto4005">Añadir al carrito</button>
                </div>
            </div>

            <div class="col-6 col-sm-6 col-md-4 col-lg-3 col-xl-2">
                <div class="glasses_box">
                    <figure>
                        <img src="images/joyas venta/6/portada.jpg" alt="Pulsera Negro/Rojo" style="border-radius: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.2); transition: transform 0.3s ease; cursor: pointer;" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'"/>
                    </figure>
                    <h3><span class="blu">$</span>88,000 COP</h3>
                    <p>Pulsera en oro Laminado</p>
                    <button class="btn-add-cart" data-modal="modalProducto4006">Añadir al carrito</button>
                </div>
            </div>

        </div>
    </div>
</div>




            <footer>
            <div class="footer">
                <div class="container">
                <div class="row">
                    <div class="col-md-8 offset-md-2">
            <ul class="location_icon row">
            <li class="col-4 text-center">
                <a href="#"><i class="fa fa-map-marker" aria-hidden="true"></i></a><br> Ubicacion
            </li>
            <li class="col-4 text-center">
                <a href="#"><i class="fa fa-phone" aria-hidden="true"></i></a><br> +57 320 658 0665
            </li>
            <li class="col-4 text-center">
                <a href="#"><i class="fa fa-envelope" aria-hidden="true"></i></a><br> O&Ktrends@gmail.com
            </li>
            </ul>

                    </div>
                </div>
                </div>
                <div class="copyright">
                <div class="container">
                    <div class="row">
                    <div class="col-md-12">
            <p>© 2025 O&K Trends. Todos los derechos reservados. Design by<a href="https://html.design/"> Free Html Templates</a></p>
                    </div>
                    </div>
                </div>
                </div>
            </div>
            </footer>

      <script src="js/jquery.min.js"></script>
      <script src="js/popper.min.js"></script>
      <script src="js/bootstrap.bundle.min.js"></script>
      <script src="js/jquery-3.0.0.min.js"></script>
      <script src="js/jquery.mCustomScrollbar.concat.min.js"></script>
      <script src="js/custom.js"></script>





      

      <div id="modalProducto4001" class="modal">
    <div class="modal-content">
        <span class="close-btn">&times;</span>
        <div class="slider">
             <div class="slide active"><img style="border-radius: 10px;" src="images/joyas venta/1/negro.jpg" alt="Pulsera Negra"></div>
        </div>
        <div class="color-options">
             <button class="color-btn active" data-index="0" style="background: black; border: 2px solid white;" title="Negro"></button>
        </div>
        <h1> Pulsera en oro Laminado* (Corona) <br>
            <strong>$100,000 COP</strong></h1>
        <p>✅ Pulsera en Oro Laminado
            ✅ Garantía de 1 año
            🚨 UNIDADES LIMITADAS 🚨</p>
        <p id="selectedColor4001" style="display: none; color: rgb(0, 0, 0);"><span id="colorName4001"></span></p>
        <div class="contador">
            <button id="restar4001">-</button>
            <input type="text" id="cantidad4001" value="1" readonly />
            <button id="sumar4001">+</button>
        </div>
        <button class="btn-add-cart" id="agregarCarritoModal4001">Agregar al carrito</button>
    </div>
</div>

<div id="modalProducto4002" class="modal">
    <div class="modal-content">
        <span class="close-btn">&times;</span>
        <div class="slider">
            <div class="slide active"><img style="border-radius: 10px;" src="images/joyas venta/2/dorado.jpg" alt="Pulsera Dorada"></div>
        </div>
        <div class="color-options">
            <button class="color-btn active" data-index="0" style="background: gold; border: 2px solid black;" title="Dorado"></button>
        </div>
        <h1> Pulsera en oro Laminado* (Circulares) <br>
            <strong>$120,000 COP</strong></h1>
        <p>✅ Pulsera en Oro Laminado
            ✅ Garantía de 1 año</p>
        <p id="selectedColor4002" style="display: none; color: rgb(0, 0, 0);"><span id="colorName4002"></span></p>
        <div class="contador">
            <button id="restar4002">-</button>
            <input type="text" id="cantidad4002" value="1" readonly />
            <button id="sumar4002">+</button>
        </div>
        <button class="btn-add-cart" id="agregarCarritoModal4002">Agregar al carrito</button>
    </div>
</div>

<div id="modalProducto4003" class="modal">
    <div class="modal-content">
        <span class="close-btn">&times;</span>
        <div class="slider">
            <div class="slide active"><img style="border-radius: 10px;" src="images/joyas venta/3/negro.jpg" alt="Negro"></div>
            <div class="slide"><img style="border-radius: 10px;" src="images/joyas venta/3/dorado.jpg" alt="Dorado"></div>
        </div>
        <div class="color-options">
            <button class="color-btn active" data-index="0" style="background: black; border: 2px solid white;" title="Negro"></button>
            <button class="color-btn" data-index="1" style="background: gold;" title="Dorado"></button>
        </div>
        <h1> Pulsera en oro Laminado* (2 colores) <br>
            <strong>$120,000 COP</strong></h1>
        <p>✅ Pulsera en Oro Laminado
            ✅ Diseño bicolor elegante</p>
        <p id="selectedColor4003" style="display: none; color: rgb(0, 0, 0);"><span id="colorName4003"></span></p>
        <div class="contador">
            <button id="restar4003">-</button>
            <input type="text" id="cantidad4003" value="1" readonly />
            <button id="sumar4003">+</button>
        </div>
        <button class="btn-add-cart" id="agregarCarritoModal4003">Agregar al carrito</button>
    </div>
</div>

<div id="modalProducto4004" class="modal">
    <div class="modal-content">
        <span class="close-btn">&times;</span>
        <div class="slider">
            <div class="slide active"><img style="border-radius: 10px;" src="images/joyas venta/4/negro.jpg" alt="Negro"></div>
            <div class="slide"><img style="border-radius: 10px;" src="images/joyas venta/4/beige.jpg" alt="Beige"></div>
        </div>
        <div class="color-options">
            <button class="color-btn active" data-index="0" data-price="130000" style="background: black; border: 2px solid white;" title="Negro"></button>
            <button class="color-btn" data-index="1" data-price="120000" style="background: burlywood;" title="Beige"></button>
        </div>
        <h1> Pulsera en oro Laminado* (Negro/Beige) <br>
            <strong><span id="priceDisplay4004">$130,000 COP</span></strong></h1>
        <p>✅ Pulsera en Oro Laminado
            ✅ Combinación de colores moderna</p>
        <p id="selectedColor4004" style="display: none; color: rgb(0, 0, 0);"><span id="colorName4004"></span></p>
        <div class="contador">
            <button id="restar4004">-</button>
            <input type="text" id="cantidad4004" value="1" readonly />
            <button id="sumar4004">+</button>
        </div>
        <button class="btn-add-cart" id="agregarCarritoModal4004">Agregar al carrito</button>
    </div>
</div>

<div id="modalProducto4005" class="modal">
    <div class="modal-content">
        <span class="close-btn">&times;</span>
        <div class="slider">
            <div class="slide active"><img style="border-radius: 10px;" src="images/joyas venta/5/negro.jpg" alt="Negro"></div>
            <div class="slide"><img style="border-radius: 10px;" src="images/joyas venta/5/dorado.jpg" alt="Dorado"></div>
        </div>
        <div class="color-options">
            <button class="color-btn active" data-index="0" style="background: black; border: 2px solid white;" title="Negro"></button>
            <button class="color-btn" data-index="1" style="background: gold;" title="Dorado"></button>
        </div>
        <h1> Pulsera en oro Laminado* (Negro/Dorado) <br>
            <strong>$120,000 COP</strong></h1>
        <p>✅ Pulsera en Oro Laminado
            ✅ Diseño moderno y elegante</p>
        <p id="selectedColor4005" style="display: none; color: rgb(0, 0, 0);"><span id="colorName4005"></span></p>
        <div class="contador">
            <button id="restar4005">-</button>
            <input type="text" id="cantidad4005" value="1" readonly />
            <button id="sumar4005">+</button>
        </div>
        <button class="btn-add-cart" id="agregarCarritoModal4005">Agregar al carrito</button>
    </div>
</div>

<div id="modalProducto4006" class="modal">
    <div class="modal-content">
        <span class="close-btn">&times;</span>
        <div class="slider">
            <div class="slide active"><img style="border-radius: 10px;" src="images/joyas venta/6/rojo.jpg" alt="Rojo"></div>
            <div class="slide"><img style="border-radius: 10px;" src="images/joyas venta/6/negro.jpg" alt="Negro"></div>
        </div>
        <div class="color-options">
            <button class="color-btn active" data-index="0" style="background: red; border: 2px solid white;" title="Rojo"></button>
            <button class="color-btn" data-index="1" style="background: black;" title="Negro"></button>
        </div>
        <h1> Pulsera en oro Laminado* (Negro/Rojo) <br>
            <strong>$88,000 COP</strong></h1>
        <p>✅ Pulsera en Oro Laminado
            ✅ Diseño deportivo y juvenil</p>
        <p id="selectedColor4006" style="display: none; color: rgb(0, 0, 0);"><span id="colorName4006"></span></p>
        <div class="contador">
            <button id="restar4006">-</button>
            <input type="text" id="cantidad4006" value="1" readonly />
            <button id="sumar4006">+</button>
        </div>
        <button class="btn-add-cart" id="agregarCarritoModal4006">Agregar al carrito</button>
    </div>
</div>














<script>
document.addEventListener("DOMContentLoaded", () => {
    document.addEventListener("click", (e) => {
        
        if (e.target.classList.contains("color-btn")) {
            
            const colorButton = e.target;
            
            const modalContent = colorButton.closest(".modal-content");
            if (!modalContent) return; 

            const modal = colorButton.closest(".modal");
            const modalIdMatch = modal.id.match(/\d+$/); 
            if (!modalIdMatch) return;
            const modalNumber = modalIdMatch[0]; 

            const selectedColorText = modalContent.querySelector(`#selectedColor${modalNumber}`); 
            const colorNameSpan = modalContent.querySelector(`#colorName${modalNumber}`); 
            
            if (selectedColorText && colorNameSpan) {
                modalContent.querySelectorAll(".color-btn").forEach(btn => {
                    btn.classList.remove("active");
                    btn.style.border = "none";
                });
                colorButton.classList.add("active");
                colorButton.style.border = "2px solid black";
                
                selectedColorText.style.display = "block";
                colorNameSpan.textContent = colorButton.title;
            }
        }
    });

});
</script>






<script>
document.addEventListener("DOMContentLoaded", () => {

    const modalesCountRelojes = 6;
    const modalesCountRopa = 13;
    const modalesCountJoyas = 6; 

    // =========================================================
    // === DATA COMPLETA DE PRODUCTOS (Relojes, Joyas, Ropa) ===
    // =========================================================
    const productData = {
        
        // === RELOJES (Basado en datos previos) ===
        modalProducto1: { 
            name: 'INVICTA Caballero (Silicona)',
            options: [
                { color: 'Blanco', price: 100000 },
                { color: 'Azul', price: 100000 },
                { color: 'Negro centro azul', price: 100000 },
                { color: 'Negro centro negro', price: 100000 },
                { color: 'Negro centro blanco', price: 100000 }
            ]
        },
        modalProducto2: {
            name: 'INVICTA Caballero (Pulso en silicona)', 
            options: [
                { color: 'Dorado', price: 175000 },
                { color: 'Bronce', price: 175000 },
            ]
        }, 
        // Agregando placeholders para el resto de Relojes, asegurando la estructura.
        modalProducto3: { name: 'Reloj 3', options: [{ color: 'Único', price: 150000 }] },
        modalProducto4: { name: 'Reloj 4', options: [{ color: 'Único', price: 150000 }] },
        modalProducto5: { name: 'Reloj 5', options: [{ color: 'Único', price: 150000 }] },
        modalProducto6: { name: 'Reloj 6', options: [{ color: 'Único', price: 150000 }] },
        
        
        // === JOYAS (4001 a 4006) - ¡CON PRECIO CORREGIDO EN 4004! ===
        modalProducto4001: { 
            name: 'Pulsera en oro Laminado* (Corona)',
            options: [
                { color: 'Negro', price: 100000 }, 
            ]
        },
        modalProducto4002: { 
            name: 'Pulsera en oro Laminado* (Circulares)',
            options: [
                { color: 'Dorado', price: 120000 }, 
            ]
        },
        modalProducto4003: { 
            name: 'Pulsera en oro Laminado* (2 colores)',
            options: [
                { color: 'Negro', price: 120000 }, 
                { color: 'Dorado', price: 120000 },
            ]
        },
        // *** JOYA 4004 CORREGIDA CON PRECIOS DIFERENTES ***
        modalProducto4004: { 
            name: 'Pulsera en oro Laminado* (Negro/Beige)',
            options: [
                { color: 'Negro', price: 130000 }, // $130,000 COP
                { color: 'Beige', price: 120000 }, // $120,000 COP
            ]
        },
        modalProducto4005: { 
            name: 'Pulsera en oro Laminado* (Negro/Dorado)',
            options: [
                { color: 'Negro', price: 120000 }, 
                { color: 'Dorado', price: 120000 },
            ]
        },
        modalProducto4006: { 
            name: 'Pulsera en oro Laminado* (Negro/Rojo)',
            options: [
                { color: 'Rojo', price: 88000 }, 
                { color: 'Negro', price: 88000 },
            ]
        },

        // === ROPA (Placeholders - Agrega tus 13 productos reales aquí si es necesario) ===
        modalRopa1: { name: 'Ropa 1', options: [{ color: 'Talla S', price: 50000 }] },
        modalRopa2: { name: 'Ropa 2', options: [{ color: 'Talla S', price: 50000 }] },
        modalRopa3: { name: 'Ropa 3', options: [{ color: 'Talla S', price: 50000 }] },
        modalRopa4: { name: 'Ropa 4', options: [{ color: 'Talla S', price: 50000 }] },
        modalRopa5: { name: 'Ropa 5', options: [{ color: 'Talla S', price: 50000 }] },
        modalRopa6: { name: 'Ropa 6', options: [{ color: 'Talla S', price: 50000 }] },
        modalRopa7: { name: 'Ropa 7', options: [{ color: 'Talla S', price: 50000 }] },
        modalRopa8: { name: 'Ropa 8', options: [{ color: 'Talla S', price: 50000 }] },
        modalRopa9: { name: 'Ropa 9', options: [{ color: 'Talla S', price: 50000 }] },
        modalRopa10: { name: 'Ropa 10', options: [{ color: 'Talla S', price: 50000 }] },
        modalRopa11: { name: 'Ropa 11', options: [{ color: 'Talla S', price: 50000 }] },
        modalRopa12: { name: 'Ropa 12', options: [{ color: 'Talla S', price: 50000 }] },
        modalRopa13: { name: 'Ropa 13', options: [{ color: 'Talla S', price: 50000 }] },
        
    };


    function loadCart() {
        const storedCart = localStorage.getItem('shoppingCart');
        try {
            return storedCart ? JSON.parse(storedCart) : [];
        } catch (e) {
            console.error("Error al cargar el carrito de localStorage:", e);
            return [];
        }
    }
    
    function saveCart(cart) {
        localStorage.setItem('shoppingCart', JSON.stringify(cart));
    }
    
    let cartSelections = loadCart();

    function calcularTotalCarrito() {
        return cartSelections.reduce((total, item) => total + item.price * item.quantity, 0);
    }

    function crearMensajeCarritoCompleto(totalActual) {
        if (cartSelections.length === 0) return "El carrito está vacío.";
        
        let mensajeDetalle = "🛒 **Carrito Actualizado** 🛒\n\n";
        
        cartSelections.forEach((item, index) => {
            const subtotalItem = item.price * item.quantity;
            mensajeDetalle += 
                `${index + 1}. ${item.quantity}x ${item.name} (${item.color})\n` +
                `   (Subtotal: $${subtotalItem.toLocaleString('es-CO')})\n`;
        });
        
        mensajeDetalle += 
            "\n-----------------------------------------\n" +
            `TOTAL FINAL: $${totalActual.toLocaleString('es-CO')}`;
            
        return mensajeDetalle;
    }

    
    const activeModalColorIndices = {}; 

    document.addEventListener("click", (e) => {
        if (e.target.classList.contains("color-btn")) {
            
            const colorButton = e.target;
            const modal = colorButton.closest(".modal");
            if (!modal) return;
            
            // Lógica existente para manejo de slides y bordes...
            const modalContent = colorButton.closest(".modal-content");
            const modalId = modal.id;

            if (modalContent) {
                let selectedIndex = -1;
                const allColorButtons = modalContent.querySelectorAll(".color-btn");
                allColorButtons.forEach((btn, index) => {
                    if (btn === colorButton) {
                        selectedIndex = index;
                    }
                });
                
                activeModalColorIndices[modalId] = selectedIndex; 

                allColorButtons.forEach(btn => {
                    btn.style.border = "none";
                });
                
                const backgroundColor = colorButton.style.backgroundColor || colorButton.style.background;
                const isLightColor = backgroundColor.includes('white') || backgroundColor.includes('yellow') || backgroundColor.includes('burlywood') || backgroundColor.includes('skyblue') || backgroundColor.includes('rgb(255, 255, 255)') || backgroundColor.includes('rgb(197, 197, 197)');
                
                if (backgroundColor.includes('gold') || backgroundColor.includes('rgb(248, 203, 56)')) {
                    colorButton.style.border = "2px solid gold";
                } else {
                    colorButton.style.border = isLightColor ? "2px solid black" : "2px solid white";
                }

                const slides = modal.querySelectorAll(".slide");
                slides.forEach((slide, idx) => {
                    slide.classList.toggle("active", idx === selectedIndex);
                });

                // Lógica para actualizar el color seleccionado (Texto)
                const modalNumber = modalId.match(/\d+$/) ? modalId.match(/\d+$/)[0] : ''; 
                const selectedColorText = modal.querySelector(`#selectedColor${modalNumber}`); 
                const colorNameSpan = modal.querySelector(`#colorName${modalNumber}`); 

                if (selectedColorText && colorNameSpan) {
                    selectedColorText.style.display = "block";
                    colorNameSpan.textContent = colorButton.title;
                }

                // *** LÓGICA DE PRECIO DINÁMICO PARA EL MODAL 4004 ***
                if (modalId === 'modalProducto4004') {
                    const priceDisplay = document.getElementById('priceDisplay4004');
                    // Usamos el 'data-price' del botón clicado
                    const newPrice = colorButton.getAttribute('data-price'); 
                    if (priceDisplay && newPrice) {
                        priceDisplay.textContent = `$${parseInt(newPrice).toLocaleString('es-CO')} COP`;
                    }
                }
                // *** FIN LÓGICA DE PRECIO DINÁMICO ***
            }
        }
    });

    // 1. INICIALIZAR RELOJES (IDs 1 a 6)
    for(let i = 1; i <= modalesCountRelojes; i++) {
        setupModal(`modalProducto${i}`, i, ""); 
    }
    
    // 2. INICIALIZAR JOYAS (IDs 4001 a 4006)
    for(let i = 4001; i <= 4000 + modalesCountJoyas; i++) {
        setupModal(`modalProducto${i}`, i, ""); 
    }
    
    // 3. INICIALIZAR ROPA (Si aplica)
    for(let i = 1; i <= modalesCountRopa; i++) {
        setupModal(`modalRopa${i}`, i, "Ropa"); 
    }

    function setupModal(modalId, index, prefix) {
        const modal = document.getElementById(modalId);
        if (!modal) return;
        
        const closeBtn = modal.querySelector(".close-btn");
        const colorButtons = modal.querySelectorAll(".color-btn");
        const slides = modal.querySelectorAll(".slide");
        
        const sumarBtn = modal.querySelector(`#sumar${prefix}${index}`);
        const restarBtn = modal.querySelector(`#restar${prefix}${index}`);
        const cantidadInput = modal.querySelector(`#cantidad${prefix}${index}`);
        const agregarCarritoModalBtn = modal.querySelector(`#agregarCarritoModal${prefix}${index}`);
        
        const selectedColorText = modal.querySelector(`#selectedColor${prefix}${index}`);
        const colorNameSpan = modal.querySelector(`#colorName${prefix}${index}`);
        
        // Obtener el elemento donde se muestra el precio (Solo existe para 4004)
        const priceDisplay = document.getElementById(`priceDisplay${prefix}${index}`); 

        activeModalColorIndices[modalId] = 0;
        
        function setActive(i) {
            slides.forEach((slide, idx) => {
                slide.classList.toggle("active", idx === i);
            });
            colorButtons.forEach((btn, idx) => {
                btn.classList.remove("active");
                btn.style.border = "none";
                
                if (idx === i) {
                    btn.classList.add("active");
                    const backgroundColor = btn.style.backgroundColor || btn.style.background;
                    const isLightColor = backgroundColor.includes('white') || backgroundColor.includes('yellow') || backgroundColor.includes('burlywood') || backgroundColor.includes('skyblue') || backgroundColor.includes('rgb(255, 255, 255)') || backgroundColor.includes('rgb(197, 197, 197)');
                    
                    if (backgroundColor.includes('gold') || backgroundColor.includes('rgb(248, 203, 56)')) {
                        btn.style.border = "2px solid gold";
                    } else {
                        btn.style.border = isLightColor ? "2px solid black" : "2px solid white";
                    }

                    // *** LÓGICA DE PRECIO AL INICIALIZAR O CAMBIAR DE MODAL (para 4004) ***
                    if (modalId === 'modalProducto4004' && priceDisplay) {
                        // Usamos el 'data-price' para establecer el precio inicial (o al cambiar de color)
                        const newPrice = btn.getAttribute('data-price');
                        if (newPrice) {
                            priceDisplay.textContent = `$${parseInt(newPrice).toLocaleString('es-CO')} COP`;
                        }
                    }
                    // *** FIN LÓGICA PRECIO INICIAL ***
                }
            });
            activeModalColorIndices[modalId] = i; 
            
            if (colorButtons.length > 0) {
                 if (selectedColorText) selectedColorText.style.display = "block";
                 if (colorNameSpan) colorNameSpan.textContent = colorButtons[i].title;
            } else {
                 if (selectedColorText) selectedColorText.style.display = "none";
            }
        }
        
        if (cantidadInput) cantidadInput.value = 1; 
        setActive(0); // Establecer el color inicial
        
        
        // Lógica para abrir el modal al hacer click en el botón de la tarjeta
        document.querySelectorAll(`.btn-add-cart[data-modal="${modalId}"]`).forEach(btn => {
            btn.addEventListener("click", (e) => {
                e.preventDefault(); 
                modal.style.display = "flex";
                
                if (cantidadInput) cantidadInput.value = 1; 
                setActive(0); // Restablecer al primer color al abrir
            });
        });
        
        if (closeBtn) {
            closeBtn.addEventListener("click", () => {
                modal.style.display = "none";
            });
        }

        window.addEventListener("click", (e) => {
            if(e.target === modal) modal.style.display = "none";
        });

        if (sumarBtn && restarBtn && cantidadInput) {
            sumarBtn.addEventListener("click", () => {
                cantidadInput.value = parseInt(cantidadInput.value) + 1;
            });
            restarBtn.addEventListener("click", () => {
                let val = parseInt(cantidadInput.value);
                if (val > 1) { 
                    cantidadInput.value = val - 1;
                }
            });
        }
        
        if (agregarCarritoModalBtn && cantidadInput) {
            agregarCarritoModalBtn.addEventListener("click", () => {
                const cantidad = parseInt(cantidadInput.value);
                const selectedColorIndex = activeModalColorIndices[modalId]; 
                
                if (selectedColorIndex !== -1 && cantidad > 0) {
                    const productObject = productData[modalId]; 
                    const selectedOption = productObject ? productObject.options[selectedColorIndex] : null;

                    if (selectedOption) {
                        const item = {
                            productId: modalId,
                            name: productObject.name, 
                            color: selectedOption.color,
                            price: selectedOption.price, // ESTO USA EL PRECIO CORREGIDO DE productData[4004]
                            quantity: cantidad
                        };
                        
                        cartSelections.push(item);
                        saveCart(cartSelections);
                        
                        alert(crearMensajeCarritoCompleto(calcularTotalCarrito())); 

                        cantidadInput.value = 1; 
                        
                    } else {
                        alert("Error: No se encontró la opción de color seleccionada.");
                    }
                } else if (cantidad === 0) {
                    alert("Por favor, selecciona una cantidad mayor a cero.");
                } else {
                    alert("Por favor, selecciona un color."); 
                }
            });
        }
    } 

});
</script>









<a id="openCartLink" href="carritodecompras.html" class="transition ease-in-out duration-300 hover:scale-110">
    <span id="cartItemCount" class="bg-red-500 hover:bg-red-600">0</span>
    <i data-lucide="shopping-cart" class="w-7 h-7"></i>
</a>

<script src="https://unpkg.com/lucide@latest"></script>


<script>

document.addEventListener("DOMContentLoaded", () => {
    
    function loadCart() {
        const storedCart = localStorage.getItem('shoppingCart');
        try {
            return storedCart ? JSON.parse(storedCart) : [];
        } catch (e) {
            console.error("Error al cargar el carrito de localStorage:", e);
            return [];
        }
    }

    function updateCartBadge() {
        const cartSelections = loadCart();
        const totalItems = cartSelections.reduce((count, item) => count + item.quantity, 0);
        const badge = document.getElementById('cartItemCount');
        
        if (badge) {
            badge.textContent = totalItems;
            badge.style.display = totalItems > 0 ? 'block' : 'none';
        }
    }
    
    if (typeof lucide !== 'undefined' && lucide.createIcons) {
        lucide.createIcons();
    }

    updateCartBadge();
    
    window.addEventListener('storage', updateCartBadge);
});
</script>

   </body>
</html>


